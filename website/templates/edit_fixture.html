{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.21/css/jquery.dataTables.css">
<script src="//cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

<body style="background-image: none;" class="light-mode"></body>
<div id="flash-messages" class="container mt-3"></div>

<style>
    form .form-control.comments-textarea {
        min-height: 100px;
    }
    .form-look{
    background-color: #e9ecef;
    }
</style>

<form method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <h2 class="h5_white_on_grey">Editing Fixture: {{ fixture.date.strftime('%d-%m-%y') }} between {{ home_school.name }} and {{ away_school.name }}</h2>

    {% for match in matches %}
    <table class="table table-bordered mt-4 table_bg-white">
        <thead>
            <tr>
                <th colspan="4" class="bg-secondary text-white">Match {{ loop.index }}</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="label-cell">Player 1:</td>
                <td class="input-cell">
                    <div class="form-control form-look">
                        {{ match.player1.Forename }} {{ match.player1.Surname }}
                        <input type="hidden" name="match_{{ match.id }}_player1_id" value="{{ match.player1.id }}">
                    </div>
                </td>
                <td class="label-cell">Player 2:</td>
                <td class="input-cell">
                    <!-- <input type="text" name="match_{{ match.id }}_player2" value="{{ match.player2.Forename }} {{ match.player2.Surname }}" class="form-control" readonly> -->
                    <div class="form-control form-look">
                        {{ match.player2.Forename }} {{ match.player2.Surname }}
                        <input type="hidden" name="match_{{ match.id }}_player2_id" value="{{ match.player2.id }}">
                    </div>
                </td>
            </tr>
            <tr>
                <td class="label-cell">Singles/Doubles:</td>

                <td class="input-cell">
                    <!-- <input type="text" name="match_{{ match.id }}_type" value="{{ match.singles_or_doubles }}" class="form-control" readonly> -->
                    <div class="form-control form-look">
                        {{ match.singles_or_doubles }}
                        <input type="hidden" name="match_{{ match.id }}_singles_or_doubles" value="{{ match.singles_or_doubles }}">
                    </div>
                </td>

                <td class="label-cell">Sets Played:</td>
                <td class="input-cell"><input type="number" name="match_{{ match.id }}_sets_played" value="{{ match.sets_played }}" class="form-control"></td>
            </tr>
            <tr>
                <td class="label-cell">Sets Won:</td>
                <td class="input-cell"><input type="number" name="match_{{ match.id }}_sets_won" value="{{ match.sets_won }}" class="form-control"></td>
                <td class="label-cell">Won/Lost:</td>
                <td class="input-cell">
                    <select name="match_{{ match.id }}_won_lost" class="form-control">
                        <option value="won" {% if match.won_or_lost == 'won' %}selected{% endif %}>Won</option>
                        <option value="lost" {% if match.won_or_lost == 'lost' %}selected{% endif %}>Lost</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td class="label-cell" colspan="1">Comment:</td>
                <td class="input-cell" colspan="3">
                    <textarea name="match_{{ match.id }}_comment" class="form-control comments-textarea" rows="10">{{ match.comment }}</textarea>
                </td>
            </tr>
        </tbody>
    </table>
    {% endfor %}
    <div style="text-align:center;">
        <button type="submit" class="btn green-btn">Save Changes</button>
    </div>
</form>

{% endblock %}
